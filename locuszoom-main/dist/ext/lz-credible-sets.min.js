/*! Locuszoom 0.14.0 */
var LzCredibleSets;(()=>{var e={803:function(e){var t;t=function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";
/** 
 * @module stats 
 * @license MIT
 * */
function o(e){var t=[3.3871328727963665,133.14166789178438,1971.5909503065513,13731.69376550946,45921.95393154987,67265.7709270087,33430.57558358813,2509.0809287301227],r=[42.31333070160091,687.1870074920579,5394.196021424751,21213.794301586597,39307.89580009271,28729.085735721943,5226.495278852854],o=[1.4234371107496835,4.630337846156546,5.769497221460691,3.6478483247632045,1.2704582524523684,.2417807251774506,.022723844989269184,.0007745450142783414],a=[2.053191626637759,1.6763848301838038,.6897673349851,.14810397642748008,.015198666563616457,.0005475938084995345,1.0507500716444169e-9],i=[6.657904643501103,5.463784911164114,1.7848265399172913,.29656057182850487,.026532189526576124,.0012426609473880784,27115555687434876e-21,2.0103343992922881e-7],n=[.599832206555888,.1369298809227358,.014875361290850615,.0007868691311456133,18463183175100548e-21,1.421511758316446e-7,20442631033899397e-31],s=e-.5,l=void 0,c=void 0;if(Math.abs(s)<.425)return s*(((((((t[7]*(l=.180625-s*s)+t[6])*l+t[5])*l+t[4])*l+t[3])*l+t[2])*l+t[1])*l+t[0])/(((((((r[6]*l+r[5])*l+r[4])*l+r[3])*l+r[2])*l+r[1])*l+r[0])*l+1);if(!((l=s<0?e:1-e)>0))throw"Not implemented";return c=(l=Math.sqrt(-Math.log(l)))<=5?(((((((o[7]*(l-=1.6)+o[6])*l+o[5])*l+o[4])*l+o[3])*l+o[2])*l+o[1])*l+o[0])/(((((((a[6]*l+a[5])*l+a[4])*l+a[3])*l+a[2])*l+a[1])*l+a[0])*l+1):(((((((i[7]*(l-=5)+i[6])*l+i[5])*l+i[4])*l+i[3])*l+i[2])*l+i[1])*l+i[0])/(((((((n[6]*l+n[5])*l+n[4])*l+n[3])*l+n[2])*l+n[1])*l+n[0])*l+1),s<0&&(c=-c),c}Object.defineProperty(t,"__esModule",{value:!0});var a={ninv:o};t.ninv=o,t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.marking=t.stats=t.scoring=void 0;var o=n(r(0)),a=n(r(2)),i=n(r(3));function n(e){return e&&e.__esModule?e:{default:e}}t.scoring=a.default,t.stats=o.default,t.marking=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._nlogp_to_z2=t.normalizeProbabilities=t.bayesFactors=void 0;var o=r(0);function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}
/** 
                                                                                                                                                                                                     * @module scoring 
                                                                                                                                                                                                     * @license MIT
                                                                                                                                                                                                     */function i(e){var t=Math.pow(10,-e);return e<300?Math.pow((0,o.ninv)(t/2),2):4.59884133027944*e-5.88085867031722}function n(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)||!e.length)throw"Must provide a non-empty array of pvalues";var r=e.map((function(e){return i(e)/2}));if(t){var o=Math.max.apply(Math,a(r))-708;o>0&&(r=r.map((function(e){return e-o})))}return r.map((function(e){return Math.exp(e)}))}function s(e){var t=e.reduce((function(e,t){return e+t}),0);return e.map((function(e){return e/t}))}var l={bayesFactors:n,normalizeProbabilities:s};t.default=l,t.bayesFactors=n,t.normalizeProbabilities=s,t._nlogp_to_z2=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],o=!0,a=!1,i=void 0;try{for(var n,s=e[Symbol.iterator]();!(o=(n=s.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};
/**
 * @module marking
 * @license MIT
 */function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95;if(!Array.isArray(e)||!e.length)throw"Probs must be a non-empty array";if("number"!=typeof t||t<0||t>1||Number.isNaN(t))throw"Cutoff must be a number between 0 and 1";var r=e.reduce((function(e,t){return e+t}),0);if(r<=0)throw"Sum of provided probabilities must be > 0";for(var a=e.map((function(e,t){return[e,t]})).sort((function(e,t){return t[0]-e[0]})),i=0,n=new Array(a.length).fill(0),s=0;s<a.length;s++){var l=o(a[s],2),c=l[0],d=l[1];if(!(i<t))break;var u=c/r;n[d]=u,i+=u}return n}function i(e){return e.map((function(e){return!!e}))}function n(e){var t=e.reduce((function(e,t){return e+t}),0);return e.map((function(e){return e/t}))}var s={findCredibleSet:a,markBoolean:i,rescaleCredibleSet:n};t.default=s,t.findCredibleSet=a,t.markBoolean=i,t.rescaleCredibleSet=n}])},e.exports=t()}},t={};function r(o){if(t[o])return t[o].exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{"use strict";r.d(o,{default:()=>a});var e=r(803);function t(t){const r=t.Adapters.get("BaseUMAdapter");t.Adapters.add("CredibleSetLZ",class extends r{constructor(e){super(...arguments),this._config=Object.assign({threshold:.95,significance_threshold:7.301},this._config),this._prefix_namespace=!1}_getCacheKey(e){return[e.credible_set_threshold||this._config.threshold,e.chr,e.start,e.end].join("_")}_buildRequestOptions(e,t){const r=super._buildRequestOptions(...arguments);return r._assoc_data=t,r}_performRequest(t){const{_assoc_data:r}=t;if(!r.length)return Promise.resolve([]);const o=this._findPrefixedKey(r[0],"log_pvalue"),a=this._config.threshold,i=r.map((e=>e[o]));if(!i.some((e=>e>=this._config.significance_threshold)))return Promise.resolve(r);try{const o=e.scoring.bayesFactors(i),n=e.scoring.normalizeProbabilities(o),s=e.marking.findCredibleSet(n,a),l=e.marking.rescaleCredibleSet(s),c=e.marking.markBoolean(s);for(let e=0;e<r.length;e++)r[e][`${t._provider_name}:posterior_prob`]=n[e],r[e][`${t._provider_name}:contrib_fraction`]=l[e],r[e][`${t._provider_name}:is_member`]=c[e]}catch(e){console.error(e)}return Promise.resolve(r)}});const o=function(){const e=t.Layouts.get("tooltip","standard_association");return e.html+="{{#if credset:posterior_prob}}<br>Posterior probability: <strong>{{credset:posterior_prob|scinotation|htmlescape}}</strong>{{/if}}",e}();t.Layouts.add("tooltip","association_credible_set",o);t.Layouts.add("tooltip","annotation_credible_set",{closable:!0,show:{or:["highlighted","selected"]},hide:{and:["unhighlighted","unselected"]},html:"<strong>{{assoc:variant|htmlescape}}</strong><br>P Value: <strong>{{assoc:log_pvalue|logtoscinotation|htmlescape}}</strong><br>{{#if credset:posterior_prob}}<br>Posterior probability: <strong>{{credset:posterior_prob|scinotation|htmlescape}}</strong>{{/if}}"});const a=function(){const e=t.Layouts.get("data_layer","association_pvalues",{id:"associationcredibleset",namespace:{assoc:"assoc",credset:"credset",ld:"ld"},data_operations:[{type:"fetch",from:["assoc","ld(assoc)","credset(assoc)"]},{type:"left_match",name:"credset_plus_ld",requires:["credset","ld"],params:["assoc:position","ld:position2"]}],fill_opacity:.7,tooltip:t.Layouts.get("tooltip","association_credible_set"),match:{send:"assoc:variant",receive:"assoc:variant"}});return e.color.unshift({field:"lz_is_match",scale_function:"if",parameters:{field_value:!0,then:"#FFf000"}}),e}();t.Layouts.add("data_layer","association_credible_set",a);const i={namespace:{assoc:"assoc",credset:"credset"},data_operations:[{type:"fetch",from:["assoc","credset(assoc)"]}],id:"annotationcredibleset",type:"annotation_track",id_field:"assoc:variant",x_axis:{field:"assoc:position"},color:[{field:"lz_is_match",scale_function:"if",parameters:{field_value:!0,then:"#001cee"}},"#00CC00"],match:{send:"assoc:variant",receive:"assoc:variant"},filters:[{field:"credset:is_member",operator:"=",value:!0}],behaviors:{onmouseover:[{action:"set",status:"highlighted"}],onmouseout:[{action:"unset",status:"highlighted"}],onclick:[{action:"toggle",status:"selected",exclusive:!0}],onshiftclick:[{action:"toggle",status:"selected"}]},tooltip:t.Layouts.get("tooltip","annotation_credible_set"),tooltip_positioning:"top"};t.Layouts.add("data_layer","annotation_credible_set",i);const n={id:"annotationcredibleset",title:{text:"SNPs in 95% credible set",x:50,style:{"font-size":"14px"}},min_height:50,height:50,margin:{top:25,right:50,bottom:10,left:70},inner_border:"rgb(210, 210, 210)",toolbar:t.Layouts.get("toolbar","standard_panel"),axes:{x:{extent:"state",render:!1}},interaction:{drag_background_to_pan:!0,scroll_to_zoom:!0,x_linked:!0},data_layers:[t.Layouts.get("data_layer","annotation_credible_set")]};t.Layouts.add("panel","annotation_credible_set",n);const s=function(){const e=t.Layouts.get("panel","association",{id:"associationcrediblesets",data_layers:[t.Layouts.get("data_layer","significance"),t.Layouts.get("data_layer","recomb_rate"),t.Layouts.get("data_layer","association_credible_set")]});return e.toolbar.widgets.push({type:"display_options",position:"right",color:"blue",button_html:"Display options...",button_title:"Control how plot items are displayed",layer_name:"associationcredibleset",default_config_display_name:"Linkage Disequilibrium (default)",options:[{display_name:"95% credible set (boolean)",display:{point_shape:"circle",point_size:40,color:{field:"credset:is_member",scale_function:"if",parameters:{field_value:!0,then:"#00CC00",else:"#CCCCCC"}},legend:[{shape:"circle",color:"#00CC00",size:40,label:"In credible set",class:"lz-data_layer-scatter"},{shape:"circle",color:"#CCCCCC",size:40,label:"Not in credible set",class:"lz-data_layer-scatter"}]}},{display_name:"95% credible set (gradient by contribution)",display:{point_shape:"circle",point_size:40,color:[{field:"credset:contrib_fraction",scale_function:"if",parameters:{field_value:0,then:"#777777"}},{scale_function:"interpolate",field:"credset:contrib_fraction",parameters:{breaks:[0,1],values:["#fafe87","#9c0000"]}}],legend:[{shape:"circle",color:"#777777",size:40,label:"No contribution",class:"lz-data_layer-scatter"},{shape:"circle",color:"#fafe87",size:40,label:"Some contribution",class:"lz-data_layer-scatter"},{shape:"circle",color:"#9c0000",size:40,label:"Most contribution",class:"lz-data_layer-scatter"}]}}]}),e}();t.Layouts.add("panel","association_credible_set",s);const l={state:{},width:800,height:450,responsive_resize:!0,min_region_scale:2e4,max_region_scale:1e6,toolbar:t.Layouts.get("toolbar","standard_association"),panels:[t.Layouts.get("panel","association_credible_set"),t.Layouts.get("panel","annotation_credible_set"),t.Layouts.get("panel","genes")]};t.Layouts.add("plot","association_credible_set",l)}"undefined"!=typeof LocusZoom&&LocusZoom.use(t);const a=t})(),LzCredibleSets=o.default})();
//# sourceMappingURL=lz-credible-sets.min.js.map