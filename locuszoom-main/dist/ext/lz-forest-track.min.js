/*! Locuszoom 0.14.0 */
var LzForestTrack;(()=>{"use strict";var t={d:(e,a)=>{for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>s});const a=d3;function i(t){const e=t.DataLayers.get("BaseDataLayer"),i={point_size:40,point_shape:"square",color:"#888888",fill_opacity:1,y_axis:{axis:2},id_field:"id",confidence_intervals:{start_field:"ci_start",end_field:"ci_end"}};class s extends e{constructor(e){e=t.Layouts.merge(e,i),super(...arguments)}_getTooltipPosition(t){const e=this.parent.x_scale(t.data[this.layout.x_axis.field]),a=`y${this.layout.y_axis.axis}_scale`,i=this.parent[a](t.data[this.layout.y_axis.field]),s=this.resolveScalableParameter(this.layout.point_size,t.data),r=Math.sqrt(s/Math.PI);return{x_min:e-r,x_max:e+r,y_min:i-r,y_max:i+r}}render(){const t=this._applyFilters(),e=`y${this.layout.y_axis.axis}_scale`;if(this.layout.confidence_intervals&&this.layout.confidence_intervals.start_field&&this.layout.confidence_intervals.end_field){const a=this.svg.group.selectAll("rect.lz-data_layer-forest.lz-data_layer-forest-ci").data(t,(t=>t[this.layout.id_field])),i=t=>{let a=this.parent.x_scale(t[this.layout.confidence_intervals.start_field]),i=this.parent[e](t[this.layout.y_axis.field]);return isNaN(a)&&(a=-1e3),isNaN(i)&&(i=-1e3),`translate(${a}, ${i})`},s=t=>{const{start_field:e,end_field:a}=this.layout.confidence_intervals,i=this.parent.x_scale,s=i(t[a])-i(t[e]);return Math.max(s,1)},r=1;a.enter().append("rect").attr("class","lz-data_layer-forest lz-data_layer-forest-ci").attr("id",(t=>`${this.getElementId(t)}_ci`)).attr("transform",`translate(0, ${isNaN(this.parent.layout.height)?0:this.parent.layout.height})`).merge(a).attr("transform",i).attr("width",s).attr("height",r),a.exit().remove()}const i=this.svg.group.selectAll("path.lz-data_layer-forest.lz-data_layer-forest-point").data(t,(t=>t[this.layout.id_field])),s=isNaN(this.parent.layout.height)?0:this.parent.layout.height,r=a.symbol().size(((t,e)=>this.resolveScalableParameter(this.layout.point_size,t,e))).type(((t,e)=>{const i=this.resolveScalableParameter(this.layout.point_shape,t,e),s=`symbol${i.charAt(0).toUpperCase()+i.slice(1)}`;return a[s]||null}));i.enter().append("path").attr("class","lz-data_layer-forest lz-data_layer-forest-point").attr("id",(t=>this.getElementId(t))).attr("transform",`translate(0, ${s})`).merge(i).attr("transform",(t=>{let a=this.parent.x_scale(t[this.layout.x_axis.field]),i=this.parent[e](t[this.layout.y_axis.field]);return isNaN(a)&&(a=-1e3),isNaN(i)&&(i=-1e3),`translate(${a}, ${i})`})).attr("fill",((t,e)=>this.resolveScalableParameter(this.layout.color,t,e))).attr("fill-opacity",((t,e)=>this.resolveScalableParameter(this.layout.fill_opacity,t,e))).attr("d",r),i.exit().remove(),this.svg.group.on("click.event_emitter",(t=>{this.parent.emit("element_clicked",t,!0)})).call(this.applyBehaviors.bind(this))}}t.DataLayers.add("forest",s),t.DataLayers.add("category_forest",class extends s{_getDataExtent(t,e){const{confidence_intervals:i}=this.layout;if(i&&i.start_field&&i.end_field){const e=t=>+t[i.start_field],s=t=>+t[i.end_field];return[a.min(t,e),a.max(t,s)]}return super._getDataExtent(t,e)}getTicks(t,e){if(!["x","y1","y2"].includes(t))throw new Error(`Invalid dimension identifier ${t}`);if(t===`y${this.layout.y_axis.axis}`){const t=this.layout.y_axis.category_field;if(!t)throw new Error(`Layout for ${this.layout.id} must specify category_field`);return this.data.map(((e,a)=>({y:a+1,text:e[t]})))}return[]}applyCustomDataMethods(){const t=this.layout.y_axis.field;if(!t)throw new Error(`Layout for ${this.layout.id} must specify yaxis.field`);return this.data=this.data.map(((e,a)=>(e[t]=a+1,e))),this.layout.y_axis.floor=0,this.layout.y_axis.ceiling=this.data.length+1,this}})}"undefined"!=typeof LocusZoom&&LocusZoom.use(i);const s=i;LzForestTrack=e.default})();
//# sourceMappingURL=lz-forest-track.min.js.map