/*! Locuszoom 0.14.0 */
var LzWidgetAddons;(()=>{"use strict";var t={d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>i});d3;Math.sqrt(3);function o(t){return JSON.parse(JSON.stringify(t))}const a=["highlight","select","fade","hide"],l=["highlighted","selected","faded","hidden"],s=["unhighlight","deselect","unfade","show"];function n(t){const e=t.Widgets.get("_Button"),n=t.Widgets.get("BaseWidget");const i=function(){const e=t.Layouts.get("tooltip","standard_association");return e.html+='<a href="javascript:void(0);" onclick="LocusZoom.getToolTipPlot(this).CovariatesModel.add(LocusZoom.getToolTipData(this));">Condition on Variant</a><br>',e}(),r=function(){const e=t.Layouts.get("toolbar","standard_association");return e.widgets.push({type:"covariates_model",button_html:"Model",button_title:"Show and edit covariates currently in model",position:"left"}),e}();t.Widgets.add("covariates_model",class extends n{initialize(){this.parent_plot.state.model=this.parent_plot.state.model||{},this.parent_plot.state.model.covariates=this.parent_plot.state.model.covariates||[],this.parent_plot.CovariatesModel={button:this,add:t=>{const e=this.parent_plot,a=o(t);"object"==typeof t&&"string"!=typeof a.html&&(a.html="function"==typeof t.toHTML?t.toHTML():t.toString());for(let t=0;t<e.state.model.covariates.length;t++)if(JSON.stringify(e.state.model.covariates[t])===JSON.stringify(a))return e;return e.state.model.covariates.push(a),e.applyState(),e.CovariatesModel.updateWidget(),e},removeByIdx:t=>{const e=this.parent_plot;if(void 0===e.state.model.covariates[t])throw new Error(`Unable to remove model covariate, invalid index: ${t.toString()}`);return e.state.model.covariates.splice(t,1),e.applyState(),e.CovariatesModel.updateWidget(),e},removeAll:()=>{const t=this.parent_plot;return t.state.model.covariates=[],t.applyState(),t.CovariatesModel.updateWidget(),t},updateWidget:()=>{this.button.update(),this.button.menu.update()}}}update(){return this.button||(this.button=new e(this).setColor(this.layout.color).setHtml(this.layout.button_html).setTitle(this.layout.button_title).setOnclick((()=>{this.button.menu.populate()})),this.button.menu.setPopulate((()=>{const t=this.button.menu.inner_selector;if(t.html(""),void 0!==this.parent_plot.state.model.html&&t.append("div").html(this.parent_plot.state.model.html),this.parent_plot.state.model.covariates.length){t.append("h5").html(`Model Covariates (${this.parent_plot.state.model.covariates.length})`);const e=t.append("table");this.parent_plot.state.model.covariates.forEach(((t,o)=>{const a="object"==typeof t&&"string"==typeof t.html?t.html:t.toString(),l=e.append("tr");l.append("td").append("button").attr("class",`lz-toolbar-button lz-toolbar-button-${this.layout.color}`).style("margin-left","0em").on("click",(()=>this.parent_plot.CovariatesModel.removeByIdx(o))).html("×"),l.append("td").html(a)})),t.append("button").attr("class",`lz-toolbar-button lz-toolbar-button-${this.layout.color}`).style("margin-left","4px").html("× Remove All Covariates").on("click",(()=>this.parent_plot.CovariatesModel.removeAll()))}else t.append("i").html("no covariates in model")})),this.button.preUpdate=()=>{let t="Model";const e=this.parent_plot.state.model.covariates.length;if(e){t+=` (${e} ${e>1?"covariates":"covariate"})`}this.button.setHtml(t).disable(!1)},this.button.show()),this}}),t.Widgets.add("data_layers",class extends n{update(){return"string"!=typeof this.layout.button_html&&(this.layout.button_html="Data Layers"),"string"!=typeof this.layout.button_title&&(this.layout.button_title="Manipulate Data Layers (sort, dim, show/hide, etc.)"),this.button||(this.button=new e(this).setColor(this.layout.color).setHtml(this.layout.button_html).setTitle(this.layout.button_title).setOnclick((()=>{this.button.menu.populate()})),this.button.menu.setPopulate((()=>{this.button.menu.inner_selector.html("");const t=this.button.menu.inner_selector.append("table");return this.parent_panel._data_layer_ids_by_z_index.slice().reverse().forEach(((e,o)=>{const n=this.parent_panel.data_layers[e],i="string"!=typeof n.layout.name?n.id:n.layout.name,r=t.append("tr");r.append("td").html(i),this.layout.statuses.forEach((t=>{const e=l.indexOf(t),o=a[e];let i,d,u;n._global_statuses[t]?(i=s[e],d=`un${o}AllElements`,u="-highlighted"):(i=a[e],d=`${o}AllElements`,u=""),r.append("td").append("a").attr("class",`lz-toolbar-button lz-toolbar-button-${this.layout.color}${u}`).style("margin-left","0em").on("click",(()=>{n[d](),this.button.menu.populate()})).html(i)}));const d=0===o,u=o===this.parent_panel._data_layer_ids_by_z_index.length-1,p=r.append("td");p.append("a").attr("class",`lz-toolbar-button lz-toolbar-button-group-start lz-toolbar-button-${this.layout.color}${u?"-disabled":""}`).style("margin-left","0em").on("click",(()=>{n.moveBack(),this.button.menu.populate()})).html("▾").attr("title","Move layer down (further back)"),p.append("a").attr("class",`lz-toolbar-button lz-toolbar-button-group-middle lz-toolbar-button-${this.layout.color}${d?"-disabled":""}`).style("margin-left","0em").on("click",(()=>{n.moveForward(),this.button.menu.populate()})).html("▴").attr("title","Move layer up (further front)"),p.append("a").attr("class","lz-toolbar-button lz-toolbar-button-group-end lz-toolbar-button-red").style("margin-left","0em").on("click",(()=>(confirm(`Are you sure you want to remove the ${i} layer? This cannot be undone.`)&&n.parent.removeDataLayer(e),this.button.menu.populate()))).html("×").attr("title","Remove layer")})),this})),this.button.show()),this}}),t.Layouts.add("tooltip","covariates_model_association",i),t.Layouts.add("toolbar","covariates_model_plot",r)}"undefined"!=typeof LocusZoom&&LocusZoom.use(n);const i=n;LzWidgetAddons=e.default})();
//# sourceMappingURL=lz-widget-addons.min.js.map